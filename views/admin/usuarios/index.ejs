<%- include('../../partials/header', { title, user: user }) %>

  <div class="container mx-auto px-4 sm:px-6 lg:px-8 py-12 text-gray-200">
    <!-- Header con título y botón -->
    <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-8">
      <h1
        class="text-3xl font-extrabold bg-gradient-to-r from-purple-400 to-pink-400 bg-clip-text text-transparent flex items-center">
        <i class="fas fa-users mr-3 text-purple-400"></i>
        Listado de Usuarios
      </h1>
      <a href="/admin/usuarios/create"
        class="inline-flex items-center justify-center px-4 py-2 bg-gradient-to-r from-purple-500 to-pink-500 text-white font-medium rounded-xl shadow-lg hover:from-purple-600 hover:to-pink-600 transition-all duration-300">
        <i class="fas fa-user-plus mr-2"></i>
        Nuevo Usuario
      </a>
    </div>

    <!-- Card principal -->
    <div
      class="bg-gray-800 bg-opacity-60 backdrop-blur-sm rounded-2xl p-6 shadow-xl border border-gray-700 hover:border-purple-500 transition-all duration-300">
      <% if (usuarios && usuarios.length> 0) { %>
        <div class="overflow-x-auto">
          <table class="min-w-full divide-y divide-gray-700 table-auto">
            <thead class="bg-gray-700 bg-opacity-50">
              <tr>
                <th class="px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider">ID</th>
                <th class="px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider">Nombre
                  Completo</th>
                <th class="px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider">Tipo
                  Documento</th>
                <th class="px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider">Número
                  Documento</th>
                <th class="px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider">Nombre
                  Usuario</th>
                <th class="px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider">Correo</th>
                <th class="px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider">Rol</th>
                <th class="px-6 py-3 text-center text-xs font-medium text-gray-300 uppercase tracking-wider">Acciones
                </th>
              </tr>
            </thead>
            <tbody class="bg-gray-800 divide-y divide-gray-700">
              <% usuarios.forEach(usuario=> { %>
                <tr class="hover:bg-gray-700 transition-colors">
                  <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-200">
                    <%= usuario.id_usuario %>
                  </td>
                  <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-300">
                    <%= usuario.primer_nombre %>
                      <%= usuario.segundo_nombre || '' %>
                        <%= usuario.primer_apellido %>
                          <%= usuario.segundo_apellido || '' %>
                  </td>
                  <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-300">
                    <%= usuario.tipo_documento %>
                  </td>
                  <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-300">
                    <%= usuario.numero_documento %>
                  </td>
                  <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-300">
                    <%= usuario.nombre_usuario %>
                  </td>
                  <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-300">
                    <%= usuario.correo %>
                  </td>
                  <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-300">
                    <%= usuario.nombre_rol || 'Sin rol' %>
                  </td>
                  <td class="px-6 py-4 whitespace-nowrap text-center">
                    <div class="flex items-center justify-center space-x-2">
                      <a href="/admin/usuarios/<%= usuario.id_usuario %>"
                        class="flex items-center justify-center w-8 h-8 text-xs font-medium text-white bg-indigo-500 hover:bg-indigo-600 rounded-md shadow hover:shadow-lg transition-all duration-300"
                        title="Ver detalle">
                        <i class="fas fa-eye"></i>
                      </a>
                      <a href="/admin/usuarios/<%= usuario.id_usuario %>/edit"
                        class="flex items-center justify-center w-8 h-8 text-xs font-medium text-white bg-amber-500 hover:bg-amber-600 rounded-md shadow hover:shadow-lg transition-all duration-300"
                        title="Editar">
                        <i class="fas fa-edit"></i>
                      </a>
                      <form action="/admin/usuarios/<%= usuario.id_usuario %>?_method=DELETE" method="POST"
                        class="inline">
                        <button type="submit"
                          class="flex items-center justify-center w-8 h-8 text-xs font-medium text-white bg-red-500 hover:bg-red-600 rounded-md shadow hover:shadow-lg transition-all duration-300"
                          title="Eliminar" onclick="return confirm('¿Seguro que quieres eliminar este usuario?')">
                          <i class="fas fa-trash"></i>
                        </button>
                      </form>
                    </div>
                  </td>
                </tr>
                <% }) %>
            </tbody>
          </table>
        </div>
        <% } else { %>
          <p class="text-gray-300">
            <i class="fas fa-info-circle mr-2"></i> No hay usuarios registrados.
            <a href="/admin/usuarios/create" class="underline text-purple-400 hover:text-purple-600">Registre un nuevo
              usuario</a>.
          </p>
          <% } %>
    </div>
  </div>

  <div class="mb-8"></div>

  <%- include('../../partials/footer') %>